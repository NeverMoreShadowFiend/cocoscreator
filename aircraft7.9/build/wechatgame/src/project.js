require=function s(c,r,a){function h(t,e){if(!r[t]){if(!c[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=r[t]={exports:{}};c[t][0].call(i.exports,function(e){return h(c[t][1][e]||e)},i,i.exports,s,c,r,a)}return r[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)h(a[e]);return h}({bulletGroup:[function(e,t,o){"use strict";cc._RF.push(t,"3d2d93zegRMeaoaPHxucDMn","bulletGroup");var n=cc.Class({name:"bPosition",properties:{xAxis:{default:"",tooltip:"初始x轴，相对hero"},yAxis:{default:"",tooltip:"初始y轴，相对hero"}}}),i=cc.Class({name:"bulletInfinite",properties:{name:"",freqTime:0,initPollCount:0,prefab:cc.Prefab,position:{default:[],type:n,tooltip:"每次多少排子弹"}}}),s=cc.Class({name:"bulletFiniteG",extends:i,properties:{finiteTime:0,orginName:""}});cc.Class({extends:cc.Component,properties:function(){return{bulletInfinite:{default:null,type:i,tooltip:"单束子弹组"},bulletFiniteG:{default:[],type:s,tooltip:"双束子弹组"},hero:cc.Node}},onLoad:function(){this.eState=D.commonInfo.gameState.none,D.common.initObjPool(this,this.bulletInfinite),D.common.batchInitObjPool(this,this.bulletFiniteG)},startAction:function(){this.eState=D.commonInfo.gameState.start,this.getNewbullet(this.bulletInfinite),this.bICallback=function(){this.getNewbullet(this.bulletInfinite)}.bind(this),this.schedule(this.bICallback,this.bulletInfinite.freqTime)},pauseAction:function(){this.enabled=!1,this.eState=D.commonInfo.gameState.pause},resumeAction:function(){this.enabled=!0,this.eState=D.commonInfo.gameState.start},changeBullet:function(e,t){if(this.unschedule(this.bICallback),this.unschedule(this.bFCallback),0<t){var o=t-1;this.bulletFiniteG[o].orginName==e&&(this.bFCallback=function(e){this.getNewbullet(this.bulletFiniteG[e])}.bind(this,o),this.schedule(this.bFCallback,this.bulletFiniteG[o].freqTime,cc.macro.REPEAT_FOREVER,.2))}else this.schedule(this.bICallback,this.bulletInfinite.freqTime,cc.macro.REPEAT_FOREVER,.2)},getNewbullet:function(e){for(var t=e.name+"Pool",o=0;o<e.position.length;o++){var n=D.common.genNewNode(this[t],e.prefab,this.node),i=this.getBulletPostion(e.position[o]);n.setPosition(i),n.getComponent("bullet").bulletGroup=this}},getBulletPostion:function(e){var t=this.hero.getPosition(),o=t.x+parseInt(e.xAxis),n=t.y+parseInt(e.yAxis);return cc.p(o,n)},bulletDied:function(e){D.common.backObjPool(this,e)},bulletStop:function(){this.unschedule(this.bICallback),this.unschedule(this.bFCallback)}}),cc._RF.pop()},{}],bullet:[function(e,t,o){"use strict";cc._RF.push(t,"81be82YwS9L1LZYufVXSrCP","bullet"),cc.Class({extends:cc.Component,properties:{xSpeed:cc.Integer,ySpeed:cc.Integer,hpDrop:cc.Integer},onLoad:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(e,t){this.bulletGroup.bulletDied(t.node)},update:function(e){this.bulletGroup.eState==D.commonInfo.gameState.start&&(this.node.x+=e*this.xSpeed,this.node.y+=e*this.ySpeed,this.node.y>this.node.parent.height&&this.bulletGroup.bulletDied(this.node))}}),cc._RF.pop()},{}],common:[function(e,t,o){"use strict";cc._RF.push(t,"67917VzMgFG4LdHbqjwaGkY","common");var n=cc.Enum({none:0,start:1,stop:2}),i=cc.Class({extends:cc.Component,properties:{},statics:{gameState:n},onLoad:function(){D.commonInfo=i,D.common=this},batchInitObjPool:function(e,t){for(var o=0;o<t.length;o++){var n=t[o];this.initObjPool(e,n)}},initObjPool:function(e,t){var o=t.name+"Pool";e[o]=new cc.NodePool;for(var n=t.initPollCount,i=0;i<n;++i){var s=cc.instantiate(t.prefab);e[o].put(s)}},genNewNode:function(e,t,o){var n=null;return n=0<e.size()?e.get():cc.instantiate(t),o.addChild(n),n},backObjPool:function(e,t){e[t.name+"Pool"].put(t)},timeFmt:function(e,t){var o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return t}});cc._RF.pop()},{}],end:[function(e,t,o){"use strict";cc._RF.push(t,"c597br4kitB+7t22tMQBl2k","end"),cc.Class({extends:cc.Component,properties:{topScore:cc.Label,currentScore:cc.Label},onLoad:function(){var e=cc.sys.localStorage.getItem("topScore");this.topScore.string=e;var t=cc.sys.localStorage.getItem("currentScore");this.currentScore.string=t,cc.director.preloadScene("historyScore")},gameRestart:function(){cc.director.loadScene("main")},gameExit:function(){cc.director.loadScene("start")},gotoHistoryScore:function(){cc.director.loadScene("historyScore")}}),cc._RF.pop()},{}],enemyGroup:[function(e,t,o){"use strict";cc._RF.push(t,"703caNdSJBMG5jxYvPFwWvP","enemyGroup");var n=cc.Class({name:"enemyG",properties:{name:"",freqTime:{default:[],type:cc.Float,tooltip:"fuckyou"},initPollCount:0,prefab:cc.Prefab}});cc.Class({extends:cc.Component,properties:function(){return{enemyG:{default:[],type:n},main:{default:null,type:e("main")}}},onLoad:function(){this.eState=D.commonInfo.gameState.none,D.common.batchInitObjPool(this,this.enemyG)},startAction:function(e,t,o){this.eState=D.commonInfo.gameState.start,o&&this.unscheduleAllCallbacks();for(var n=e+3,i=e;i<n;i++){var s=this.enemyG[i].freqTime[t],c="callback_"+i;this[c]=function(e){this.getNewEnemy(this.enemyG[e])}.bind(this,i),this.schedule(this[c],s)}},resumeAction:function(){this.enabled=!0,this.eState=D.commonInfo.gameState.start},pauseAction:function(){this.enabled=!1,this.eState=D.commonInfo.gameState.pause},getNewEnemy:function(e){var t=e.name+"Pool",o=D.common.genNewNode(this[t],e.prefab,this.node),n=this.getNewEnemyPositon(o);o.setPosition(n),o.getComponent("enemy").init()},getNewEnemyPositon:function(e){var t=cc.randomMinus1To1()*(this.node.parent.width/2-e.width/2),o=this.node.parent.height/2+e.height/2;return cc.v2(t,o)},enemyDied:function(e,t){D.common.backObjPool(this,e),0<parseInt(t)&&this.main.gainScore(t)},getScore:function(){return this.main.getScore()},killAllEnemy:function(){for(var e=this.node.children,t=0;t<this.node.childrenCount;++t)"enemy"==e[t].group&&e[t].getComponent("enemy").onDead(e[t].name)}}),cc._RF.pop()},{main:"main"}],enemy:[function(e,t,o){"use strict";cc._RF.push(t,"14abee9CoxCobWl/nmeEUv8","enemy"),cc.Class({extends:cc.Component,properties:{xMinSpeed:{default:0,type:cc.Integer,tooltip:"x轴最小速度"},xMaxSpeed:{default:0,type:cc.Integer,tooltip:"x轴最大速度"},yMinSpeed:{default:0,type:cc.Integer,tooltip:"y轴最小速度"},yMaxSpeed:{default:0,type:cc.Integer,tooltip:"y轴最大速度"},initHP:{default:0,type:cc.Integer,tooltip:"初始生命值"},initSpriteFrame:{default:null,type:cc.SpriteFrame,tooltip:"初始化的图像"},score:{default:0,type:cc.Integer,tooltip:"死后获得的分数"},enemyDownClip:cc.AudioClip},onLoad:function(){cc.director.getCollisionManager().enabled=!0,this.xSpeed=Math.random()*(this.xMaxSpeed-this.xMinSpeed)+this.xMinSpeed,this.ySpeed=cc.random0To1()*(this.yMaxSpeed-this.yMinSpeed)+this.yMinSpeed,"enemyGroup"==this.node.parent.name?this.enemyGroup=this.node.parent.getComponent("enemyGroup"):console.log("prefabenemynull")},init:function(){"enemy"!=this.node.group&&(this.node.group="enemy"),this.hP!=this.initHP&&(this.hP=this.initHP);var e=this.node.getComponent(cc.Sprite);e.spriteFrame!=this.initSpriteFrame&&(e.spriteFrame=this.initSpriteFrame)},update:function(e){if(this.enemyGroup.eState==D.commonInfo.gameState.start){var t=this.enemyGroup.getScore();this.node.y+=t<=5e4?e*this.ySpeed:5e4<t&&t<=1e5?e*this.ySpeed-.5:1e5<t&&t<=15e4?e*this.ySpeed-1:15e4<t&&t<=2e5?e*this.ySpeed-1.5:2e5<t&&t<=3e5?e*this.ySpeed-2:e*this.ySpeed-3,this.node.x+=e*this.xSpeed}},onCollisionEnter:function(e,t){if("bullet"==e.node.group){var o=e.node.getComponent("bullet");0<this.hP&&(this.hP-=o.hpDrop,this.hP<=0&&this.onDead(t.node.name))}},onFinished:function(e){this.enemyGroup.enemyDied(this.node,this.score)},onDead:function(e){this.node.group="default";var t=this.getComponent(cc.Animation),o=e+"ani";t.play(o),t.on("finished",this.onFinished,this),cc.audioEngine.playEffect(this.enemyDownClip,!1)}}),cc._RF.pop()},{}],globals:[function(e,t,o){"use strict";cc._RF.push(t,"2db22ldw1ZEWKAUUhqzblk7","globals"),window.D={common:null,commonInfo:null},cc._RF.pop()},{}],hero:[function(e,t,o){"use strict";cc._RF.push(t,"3f0ccHUefxOLK9+K5/zp2v4","hero"),cc.Class({extends:cc.Component,properties:function(){return{hero_animation:{default:null,type:cc.Animation,tooltip:"动画"},gameOverClip:cc.AudioClip,main:{default:null,type:e("main")},bulletGroup:{default:null,type:e("bulletGroup")}}},onLoad:function(){},init:function(){if(this.eState=D.commonInfo.gameState.none,!D.commonInfo.hero_index)return cc.log("error:not hero_index"),!1;var e=D.commonInfo.hero_index,t="prefab/hero"+String(e),n="hero"+String(e)+"_stand",i=this;cc.loader.loadRes(t,function(e,t){var o=cc.instantiate(t);i.node.addChild(o),i.hero_animation=o.getComponent(cc.Animation),i.hero_animation.play(n)});for(var o=this.getComponents(cc.Collider),s=0;s<o.length;++s)o[s].enabled=s+1==e;this.onDrag()},onDrag:function(){this.node.on("touchmove",this.dragMove,this)},offDrag:function(){this.node.off("touchmove",this.dragMove,this)},dragMove:function(e){if(this.isDead())return!1;var t=e.getLocation(),o=this.node.parent.convertToNodeSpaceAR(t),n=-this.node.parent.width/2+this.node.width/2,i=-n,s=-this.node.parent.height/2+this.node.height/2,c=-s;o.x<n&&(o.x=n),o.x>i&&(o.x=i),o.y<s&&(o.y=s),o.y>c&&(o.y=c),this.node.setPosition(o)},onCollisionEnter:function(e,t){if(t.tag!=D.commonInfo.hero_index)return!1;if(this.isDead())return!1;if("ufo"==e.node.group)"ufoBullet"==e.node.name?(this.main.bulletname="ufoBullet",this.main.deltatime=0,this.main.progressnum<5&&(this.main.progressnum+=1),this.main.setPowerProgressBar(this.main.progressnum),this.bulletGroup.changeBullet(e.node.name,this.main.progressnum)):"ufoBomb"==e.node.name&&this.main.getUfoBomb();else{if("enemy"!=e.node.group)return!1;var o="hero"+String(D.commonInfo.hero_index)+"_blowup";this.hero_animation.play(o),this.hero_animation.on("finished",this.onFinished,this),cc.audioEngine.playEffect(this.gameOverClip,!1),this.bulletGroup.bulletStop()}},isDead:function(){var e="hero"+String(D.commonInfo.hero_index)+"_blowup",t=this.hero_animation.getAnimationState(e);return!(!t||!t.isPlaying)},onFinished:function(){this.node.destroy(),this.main.gameOver(),this.destroy()}}),cc._RF.pop()},{bulletGroup:"bulletGroup",main:"main"}],historyScore:[function(e,t,o){"use strict";cc._RF.push(t,"c11abrWZANO2aVZSE4dxEvW","historyScore"),cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,scrollContent:cc.Node,backGame:cc.Node},onLoad:function(){for(var e=JSON.parse(cc.sys.localStorage.getItem("score")),t=0;t<e.length;++t){var o=cc.instantiate(this.itemPrefab),n=e[t];this.scrollContent.addChild(o),o.getComponent("scoreItemTemplate").init({score:n.score,time:n.time})}this.backGame.on("touchstart",this.backGameO,this)},backGameO:function(){cc.director.loadScene("end")}}),cc._RF.pop()},{}],main:[function(e,t,o){"use strict";cc._RF.push(t,"6afa0phF7dPka/zlZtFFHow","main"),cc.Class({extends:cc.Component,properties:function(){return{pause:cc.Button,progresspower:{default:null,type:cc.ProgressBar},bartime:0,btnSprite:{default:[],type:cc.SpriteFrame,tooltip:"暂停按钮不同状态的图片"},bomb:cc.Node,gameMusic:{default:null,type:cc.AudioSource},useBombClip:cc.AudioClip,enemyGroup:{default:null,type:e("enemyGroup")},prefabenemyGroup:{default:null,type:e("prefabenemyGroup")},hero:{default:null,type:e("hero")},ufoGroup:{default:null,type:e("ufoGroup")},bulletGroup:{default:null,type:e("bulletGroup")},scoreDisplay:cc.Label,bombNoDisplay:cc.Label,close:cc.Button,select:cc.Node,select_bk:cc.Node}},onLoad:function(){this.onSelect_Hero(null,1),this.close.node.on("click",function(e){this.select.active=!1,this.select_bk.active=!1,this.close.node.active=!1,this.beginGame()},this)},beginGame:function(){var u=this;this.hero.init(),this.score=0,this.progressnum=0,this.bombNo=0,this.deltatime=0,this.testime=0,this.bulletname="ufoBullet",this.progresspower.progress=this.progressnum,this.scoreDisplay.string=this.score,this.bombNoDisplay.string=this.bombNo,this.eState=D.commonInfo.gameState.start,this.starttouchpos=null,this.enemyIndex=0,this.freqTimeIndex=0,this.enemyGroup.startAction(this.enemyIndex,this.freqTimeIndex,!1),this.bulletGroup.startAction(),this.ufoGroup.startAction(),this.bomb.on("touchstart",this.bombOnclick,this),u.changefreqTimeIndex=function(){u.freqTimeIndex+=1,5<u.freqTimeIndex&&(u.enemyGroup.startAction(this.enemyIndex,this.freqTimeIndex,!0),console.log(this.enemyIndex,this.freqTimeIndex))}.bind(u),this.schedule(u.changefreqTimeIndex,20),this.changeEnemyIndex=function(){u.enemyIndex+=3,10<u.enemyIndex&&(u.enemyIndex=9),u.unschedule(u.changefreqTimeIndex),u.freqTimeIndex=0,u.schedule(u.changefreqTimeIndex,20),u.enemyGroup.startAction(this.enemyIndex,this.freqTimeIndex,!0),console.log(this.enemyIndex,this.freqTimeIndex)}.bind(this),this.schedule(this.changeEnemyIndex,120),this.gameMusic.play(),this.node.on(cc.Node.EventType.TOUCH_START,this.touchcallback=function(e){u.starttouchpos=e.getLocation()},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.movecallback=function(e){var t=e.getLocation(),o=t.x-u.starttouchpos.x,n=t.y-u.starttouchpos.y;if(null!=u.hero.node){var i=u.hero.node.getPosition(),s=cc.p(2*o+i.x,2*n+i.y);u.starttouchpos=t;var c=-u.node.width/2,r=-c,a=-u.node.height/2,h=-a;s.x<c&&(s.x=c),s.x>r&&(s.x=r),s.y<a&&(s.y=a),s.y>h&&(s.y=h),u.hero.node.setPosition(s)}})},bombOnclick:function(){var e=this.bomb.getChildByName("bombNo").getComponent(cc.Label),t=parseInt(e.string);0<t?(e.string=t-1,this.removeEnemy(),cc.audioEngine.playEffect(this.useBombClip,!1)):console.log("没有子弹")},pauseClick:function(){this.eState==D.commonInfo.gameState.pause?(this.resumeAction(),this.eState=D.commonInfo.gameState.start):this.eState==D.commonInfo.gameState.start&&(this.pauseAction(),this.eState=D.commonInfo.gameState.pause)},resumeAction:function(){this.enemyGroup.resumeAction(),this.bulletGroup.resumeAction(),this.ufoGroup.resumeAction(),this.hero.onDrag(),this.gameMusic.resume(),this.pause.normalSprite=this.btnSprite[0],this.pause.pressedSprite=this.btnSprite[1],this.pause.hoverSprite=this.btnSprite[1]},pauseAction:function(){this.enemyGroup.pauseAction(),this.bulletGroup.pauseAction(),this.hero.offDrag(),this.gameMusic.pause(),this.ufoGroup.pauseAction(),this.pause.normalSprite=this.btnSprite[2],this.pause.pressedSprite=this.btnSprite[3],this.pause.hoverSprite=this.btnSprite[3]},gainScore:function(e){this.score+=e,this.scoreDisplay.string=this.score.toString()},getScore:function(){return parseInt(this.scoreDisplay.string)},setPowerProgressBar:function(e){5<e&&(e=5),this.progresspower.progress=.2*e},update:function(e){this.deltatime+=e,this.testime+=e,10<=this.deltatime&&(this.progressnum-=1,this.deltatime=0,this.progressnum<=0&&(this.progressnum=0),this.bulletGroup.changeBullet(this.bulletname,this.progressnum)),this.progresspower.progress-=.02*e,this.progresspower.progress<0&&(this.progresspower.progress=0)},updateScore:function(){var e=this.scoreDisplay.string,t={score:e,time:D.common.timeFmt(new Date,"yyyy-MM-dd hh:mm:ss")},o=cc.sys.localStorage.getItem("score"),n=cc.sys.localStorage.getItem("topScore");(!n||parseInt(n)<parseInt(e))&&cc.sys.localStorage.setItem("topScore",e),o?((o=JSON.parse(o))instanceof Array||(o=[]),o.unshift(t)):(o=[]).unshift(t),cc.sys.localStorage.setItem("currentScore",e),cc.sys.localStorage.setItem("score",JSON.stringify(o))},removeEnemy:function(){this.enemyGroup.killAllEnemy()},getUfoBomb:function(){parseInt(this.bombNoDisplay.string)<3&&(this.bombNoDisplay.string+=1)},gameOver:function(){this.pauseAction(),this.updateScore(),cc.director.loadScene("end")},onExit:function(){this.gameMusic.stop(),this.unschedule(this.setProgressCallBack)},onSelect_Hero:function(e,t){var o=t;if(o<1||7<o)return!1;cc.log("onSelect_Hero");var n=this.select_bk.getChildByName("select_pic"),i=this.select_bk.getChildByName("select_hero"+o);if(!n)return cc.log("error select_pic"),!1;if(!i)return cc.log("error select_hero_"),!1;var s=i.getPosition();s.y=s.y-10,n.setPosition(s);var c=this.select_bk.getChildByName("cur_hero");c.getComponent(cc.Sprite).spriteFrame=null,cc.loader.loadRes("Texture/hero"+o,cc.SpriteFrame,function(e,t){c.getComponent(cc.Sprite).spriteFrame=t}),D.commonInfo.hero_index=o},onUnlock_Hero:function(e){var t=D.commonInfo.hero_index;if(t<1||7<t)return!1;var o=this.select_bk.getChildByName("select_hero"+t);o.getChildByName("mask").active=!1,o.getChildByName("lock").active=!1},onSkillMaxBigen:function(e){this.select.active=!1,this.select_bk.active=!1,this.close.node.active=!1,this.beginGame(),this.progressnum=5,this.bulletGroup.changeBullet(this.bulletname,this.progressnum),this.setPowerProgressBar(this.progressnum)}}),cc._RF.pop()},{bulletGroup:"bulletGroup",enemyGroup:"enemyGroup",hero:"hero",prefabenemyGroup:"prefabenemyGroup",ufoGroup:"ufoGroup"}],prefabenemyGroup:[function(e,t,o){"use strict";cc._RF.push(t,"9ece3rsIYFL6Z4jzk8MOsG/","prefabenemyGroup");var n=cc.Class({name:"prefabenemyG",properties:{name:"",freqTime:0,initPollCount:0,prefab:cc.Prefab}});cc.Class({extends:cc.Component,properties:function(){return{prefabenemyG:{default:[],type:n},main:{default:null,type:e("main")}}},onLoad:function(){console.log("-------------"),this.eState=D.commonInfo.gameState.none,D.common.batchInitObjPool(this,this.prefabenemyG)},startAction:function(){console.log("startfunctionjkgkghgkjhgkjgkjhgkjhgkhgkh"),this.eState=D.commonInfo.gameState.start;for(var e=0;e<this.prefabenemyG.length;++e){var t=this.prefabenemyG[e].freqTime,o="callback_"+e;this[o]=function(e){this.getNewEnemy(this.prefabenemyG[e])}.bind(this,e),this.schedule(this[o],t)}},resumeAction:function(){this.enabled=!0,this.eState=D.commonInfo.gameState.start},pauseAction:function(){this.enabled=!1,this.eState=D.commonInfo.gameState.pause},getNewEnemy:function(e){var t=e.name+"Pool",o=D.common.genNewNode(this[t],e.prefab,this.node),n=this.getNewEnemyPositon(o);o.setPosition(n),console.log("ffffffffffffffffffffffffffffffffffffffff");for(var i=0;i<o.childrenCount;i++)console.log("index===================:"+o.children[i].name),o.children[i].getComponent("enemy").init()},getNewEnemyPositon:function(e){var t=cc.randomMinus1To1()*(this.node.parent.width/2-e.width/2),o=this.node.parent.height/2+e.height/2;return cc.v2(t,o)},enemyDied:function(e,t){D.common.backObjPool(this,e),0<parseInt(t)&&this.main.gainScore(t)},getScore:function(){return this.main.getScore()}}),cc._RF.pop()},{main:"main"}],scoreItemTemplate:[function(e,t,o){"use strict";cc._RF.push(t,"e7aaajpGBdAAaGaUimU4MnH","scoreItemTemplate"),cc.Class({extends:cc.Component,properties:{itemScore:cc.Label,itemTime:cc.Label},onLoad:function(){},init:function(e){this.itemScore.string="积分："+e.score,this.itemTime.string="时间："+e.time}}),cc._RF.pop()},{}],start:[function(e,t,o){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","start"),cc.Class({extends:cc.Component,properties:{game_loading:cc.Node},onLoad:function(){this.game_loading.getComponent(cc.Animation).play(),cc.director.preloadScene("main")},startGame:function(){cc.director.loadScene("main",function(){console.log("main is loaded")})}}),cc._RF.pop()},{}],ufoGroup:[function(e,t,o){"use strict";cc._RF.push(t,"07c58NeAQVELrP3L2RCOyrA","ufoGroup");var n=cc.Class({name:"ufoG",properties:{name:"",freqTime:0,prefab:cc.Prefab,initPoolCount:0,minDelay:{default:0,tooltip:"最小延迟"},maxDelay:{default:0,tooltip:"最大延迟"}}});cc.Class({extends:cc.Component,properties:{ufoG:{default:[],type:n}},onLoad:function(){this.eState=D.commonInfo.gameState.none,D.common.batchInitObjPool(this,this.ufoG)},startAction:function(){this.eState=D.commonInfo.gameState.start;for(var e=0;e<this.ufoG.length;++e){var t=this.ufoG[e].freqTime,o="callback_"+e;this[o]=function(e){this.randNewUfo(this.ufoG[e])}.bind(this,e),this.schedule(this[o],t)}},randNewUfo:function(e){var t=Math.random()*(e.maxDelay-e.minDelay)+e.minDelay;this.scheduleOnce(function(e){this.getNewUfo(e)}.bind(this,e),t)},getNewUfo:function(e){var t=e.name+"Pool",o=D.common.genNewNode(this[t],e.prefab,this.node),n=this.getNewUfoPositon(o);o.setPosition(n)},getNewUfoPositon:function(e){var t=cc.randomMinus1To1()*(this.node.parent.width/2-e.width/2),o=this.node.parent.height/2+e.height/2;return cc.v2(t,o)},resumeAction:function(){this.enabled=!0,this.eState=D.commonInfo.gameState.start},pauseAction:function(){this.enabled=!1,this.eState=D.commonInfo.gameState.pause},ufoDied:function(e){D.common.backObjPool(this,e)}}),cc._RF.pop()},{}],ufo:[function(e,t,o){"use strict";cc._RF.push(t,"1e7a0zfIuJA+Kn9DAfY5544","ufo"),cc.Class({extends:cc.Component,properties:{xMinSpeed:{default:0,type:cc.Integer},xMaxSpeed:{default:0,type:cc.Integer},yMinSpeed:{default:0,type:cc.Integer},yMaxSpeed:{default:0,type:cc.Integer},getUfoClip:cc.AudioClip},onLoad:function(){cc.director.getCollisionManager().enabled=!0,this.xSpeed=Math.random()*(this.xMaxSpeed-this.xMinSpeed)+this.xMinSpeed,this.ySpeed=cc.random0To1()*(this.yMaxSpeed-this.yMinSpeed)+this.yMinSpeed,this.ufoGroup=this.node.parent.getComponent("ufoGroup")},onCollisionEnter:function(e,t){this.node.destroy(),cc.audioEngine.playEffect(this.getUfoClip,!1)},update:function(e){this.ufoGroup.eState==D.commonInfo.gameState.start&&(this.node.x+=e*this.xSpeed,this.node.y+=e*this.ySpeed,this.node.y<-this.node.parent.height/2&&this.ufoGroup.ufoDied(this.node))}}),cc._RF.pop()},{}]},{},["bullet","bulletGroup","common","end","enemy","enemyGroup","globals","hero","historyScore","main","prefabenemyGroup","scoreItemTemplate","start","ufo","ufoGroup"]);